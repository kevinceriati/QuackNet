{% extends 'base.html.twig' %}

{% block title %}Quack{% endblock %}

{% block body %}

    {#{% for quack in quacks %}#}

    <h1>Quack</h1>
    <div class="container">
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <h3>{{ quack.author.duckname }}</h3>
                </div>
            </div>
            <div class="body row no-gutters">
                <div class="col-md-2">
                    <img class="card-img" src="{{ asset(quack.picture) }}" alt="">
                </div>
                <div class="col-md-10">
                    <p class="card-text">{{ quack.content }}</p>
                </div>
            </div>
            <div class="card-footer">
                comments
            </div>
        </div>
    </div>

    {#{% endfor %}#}

    {#<table class="table">#}
        {#<tbody>#}
        {#<tr>#}
            {#<th>Id</th>#}
            {#<td>{{ quack.id }}</td>#}
        {#</tr>#}
        {#<tr>#}
            {#<th>Content</th>#}
            {#<td>{{ quack.content }}</td>#}
        {#</tr>#}
        {#<tr>#}
            {#<th>author</th>#}
            {#<td>{{ quack.author.duckname }}</td>#}
        {#</tr>#}
        {#{% for comment in quack.comments %}#}
            {#<tr>#}
                {#<th>Commentaire de :</th>#}
                {#<td>{{ comment.author.duckname }}</td>#}
            {#</tr>#}


            {#{% if is_granted('edit', comment) %}#}
                {#<a class="btn btn-primary ml-auto" data-toggle="modal" data-target="#currentCom{{ quack.id }}">edit#}
                    {#commentaire</a>#}
            {#{% endif %}#}
            {#<!-- Button trigger modal -->#}

            {#<!-- Modal -->#}
            {#<div class="modal fade" id="currentCom{{ quack.id }}" tabindex="-1" role="dialog"#}
                 {#aria-labelledby="exampleModalCenterTitle" aria-hidden="true">#}
                {#<div class="modal-dialog modal-dialog-centered" role="document">#}
                    {#<div class="modal-content">#}
                        {#<div class="modal-header">#}
                            {#<h5 class="modal-title" id="exampleModalLongTitle">Commentaire</h5>#}
                            {#<button type="button" class="close" data-dismiss="modal"#}
                                    {#aria-label="Close">#}
                                {#<span aria-hidden="true">&times;</span>#}
                            {#</button>#}
                        {#</div>#}
                        {#<div class="modal-footer">#}
                            {#<button type="button" class="btn btn-secondary"#}
                                    {#data-dismiss="modal">Close#}
                            {#</button>#}
                        {#</div>#}
                    {#</div>#}
                {#</div>#}
            {#</div>#}


            {#<tr>#}
                {#<th>Message :</th>#}
                {#<td>{{ comment.content }}</td>#}
                {#{% if is_granted('ROLE_ADMIN') %}#}
                {#<td>#}
                    {#</td>#}
                {#{% endif %}#}
            {#</tr>#}
        {#{% endfor %}#}

        {#<tr>#}
            {#<th>Created_at</th>#}
            {#<td>{{ quack.createdAt ? quack.createdAt|date('Y-m-d H:i:s') : '' }}</td>#}
        {#</tr>#}
        {#</tbody>#}
    {#</table>#}

    <a href="{{ path('quack_index') }}">back to list</a><br>
    {% if is_granted('edit', quack) %}
        <a href="{{ path('quack_edit', {'id': quack.id}) }}">edit</a>
    {% endif %}


    {% if is_granted('edit', quack) %}
        {{ include('quack/_delete_form.html.twig') }}
    {% endif %}

{% endblock %}
